name: slides-to-gh-pages

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      # Check out the repository
      - name: Checkout repository
        uses: actions/checkout@v2

      # Install Ruby and Asciidoctor dependencies
      - name: Install Ruby and Asciidoctor
        run: |
          sudo apt-get update
          sudo apt-get install -y ruby ruby-dev build-essential
          gem install asciidoctor asciidoctor-revealjs asciidoctor-diagram

      # Build Reveal.js slides with AsciiDoctor
      - name: Build Reveal.js slides
        run: |
          asciidoctor-revealjs -r asciidoctor-diagram \
          -a icons=font \
          -a revealjs_theme=white \
          -a source-highlighter=rouge \
          -a imagesdir=images \
          -a revealjs_slideNumber=c/t \
          -a revealjs_transition=slide \
          -a revealjs_hash=true \
          -D build Dokumentation/Slides/asciidocs-Slides/index.adoc

      # Deploy to GitHub Pages
      - name: Deploy to GitHub Pages
        uses: JamesIves/github-pages-deploy-action@4.1.0
        with:
          branch: gh-pages # The branch to deploy to
          folder: build    # The folder containing the built files
